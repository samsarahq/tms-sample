<% content_for :title, "Drivers" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Drivers</h1>
    <div class="flex items-center gap-2">
      <%= link_to "Fetch", fetch_drivers_path, class: "rounded-md px-3.5 py-2.5 bg-gray-600 hover:bg-gray-500 text-white block font-medium" %>
      <%= link_to "New driver", new_driver_path, class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
    </div>
  </div>

  <div id="drivers" class="mt-4 grid grid-cols-1 md:grid-cols-5 gap-4">
    <% if @drivers.any? %>
      <% @drivers.each do |driver| %>
          <div class="bg-white p-4 rounded-lg shadow">
            <div class="flex flex-col items-center">
              <div class="w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center mb-4">
                <span class="text-gray-500 text-4xl"><%= driver.name.first %></span>
              </div>

              <h3 class="font-bold text-lg mb-1 truncate w-full text-center"><%= driver.name %></h3>
              <p class="text-gray-600 text-sm mb-1"><%= driver.phone_number&.phony_formatted %></p>
              <p class="text-gray-600 text-sm mb-2"><%= driver.username %></p>

              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium <%= driver.active? ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800' %> mb-2">
                <%= driver.active? ? 'Active' : 'Inactive' %>
              </span>

              <p class="text-gray-400 text-xs mb-3">ID: <%= driver.samsara_id %></p>

              <%= link_to "View Details", driver, class: "text-sm text-blue-600 hover:text-blue-500" %>
            </div>
          </div>
      <% end %>
    <% else %>
      <p class="text-center my-10">No drivers found.</p>
    <% end %>
  </div>
</div>
