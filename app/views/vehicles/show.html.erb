<% content_for :title, "Showing vehicle" %>

<div class="md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="font-bold text-4xl">Showing vehicle</h1>

  <%= render @vehicle %>

  <div id="map" class="w-full h-96 mb-8 rounded-lg"></div>

  <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: <%= @vehicle.latitude %>, lng: <%= @vehicle.longitude %> },
        zoom: 14,
      });

      new google.maps.Marker({
        position: { lat: <%= @vehicle.latitude %>, lng: <%= @vehicle.longitude %> },
        map: map,
        title: "<%= @vehicle.name %>"
      });
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDajwFDfpgmYHhj-74PwFTaL2v_vuN4_bk&callback=initMap">
  </script>

  <%= link_to "Edit this vehicle", edit_vehicle_path(@vehicle), class: "mt-2 rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
  <%= link_to "Back to vehicles", vehicles_path, class: "ml-2 rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
  <div class="inline-block ml-2">
    <%= button_to "Destroy this vehicle", @vehicle, method: :delete, class: "mt-2 rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium" %>
  </div>
</div>
